function extraiScript(texto){
     var ini, pos_src, fim, codigo, texto_pesquisa;
     var objScript = null;
     texto_pesquisa = texto.toLowerCase()
     ini = texto_pesquisa.indexOf('<script', 0)
     while (ini!=-1){
         var objScript = document.createElement("script");
         pos_src = texto_pesquisa.indexOf(' src', ini)
         ini = texto_pesquisa.indexOf('>', ini) + 1;
         if (pos_src < ini && pos_src >=0){
             ini = pos_src + 4;
             fim = texto_pesquisa.indexOf('.', ini)+4;
             codigo = texto.substring(ini,fim);
             codigo = codigo.replace("=","").replace(" ","").replace("\"","").replace("\"","").replace("\'","").replace("\'","").replace(">","");
             objScript.src = codigo;
         }else{
             fim = texto_pesquisa.indexOf('</script>', ini);
             codigo = texto.substring(ini,fim);
             objScript.text = codigo;
         }
         document.body.appendChild(objScript);
         ini = texto.indexOf('<script', fim);
         objScript = null;
     }
 }

function returnQuery(form){
    var elements = form.elements;
	var fields = null;
    for (var i = 0; i < elements.length; i++) {
        var name;
        if ((name = elements[i].name) && (value = elements[i].value)){
					if(i == 0){
						fields = name + "=" + encodeURIComponent(value);
					} else {
									fields += "&"+(name + "=" + encodeURIComponent(value));
					}
				}
    }
    //alert (fields);
	return fields;
}

function BuscaElementosForm(idForm) {
    var elementosFormulario = document.getElementById(idForm).elements;
    var qtdElementos = elementosFormulario.length;
     var queryString = "";
     var elemento;
    this.ConcatenaElemento = function(nome,valor) {
                                 if (queryString.length>0) {
                                     queryString += "&";
                                 }
                                 queryString += encodeURIComponent(nome) + "=" + encodeURIComponent(valor);
                              };
     for (var i=0; i<qtdElementos; i++) {
         elemento = elementosFormulario[i];
         if (!elemento.disabled && elemento.name) {
             switch(elemento.type) {
                 case 'text': case 'password': case 'hidden': case 'textarea': case 'email': case 'number':
                     this.ConcatenaElemento(elemento.name,elemento.value);
                     break;
                 case 'select-one':
                     if (elemento.selectedIndex>=0) {
                         this.ConcatenaElemento(elemento.name,elemento.options[elemento.selectedIndex].value);
                     }
                     break;
                 case 'select-multiple':
                     for (var j=0; j<elemento.options.length; j++) {
                         if (elemento.options[j].selected) {
                             this.ConcatenaElemento(elemento.name,elemento.options[j].value);
                         }
                     }
                     break;
                 case 'checkbox': case 'radio':
                     if (elemento.checked) {
                         this.ConcatenaElemento(elemento.name,elemento.value);
                     }
                     break;
             }
         }
     }
     return queryString;
 }

 var lastRequestCache = (new Date().getTime()) + ":" + Math.random();
 var webStoreTime = null;

 function setRequestPageLoader(div) {
    document.getElementById(div).innerHTML = '<div style="text-align: center;"><img src="https://images.muaway.net/site/images/loader.gif" /></div>';
 }

function requestPage(url, div, tipo, campos, hideLoading)
{
    var ajax = null;
	if(window.ActiveXObject)
		ajax = new ActiveXObject('Microsoft.XMLHTTP');
	else if(window.XMLHttpRequest)
		ajax = new XMLHttpRequest();

    if (webStoreTime !== null) {
        clearTimeout(webStoreTime);
        webStoreTime = null;
    }


	if(ajax != null)
	{
	    if (typeof hideLoading === 'undefined' || hideLoading !== true) {
            setRequestPageLoader(div);
        }

        lastRequestCache = new Date().getTime();
		ajax.open(tipo, url /*+ "&cache=" + cache*/ , true);
		ajax.onreadystatechange = function status()
		{
				if(ajax.readyState == 4)
				{
					if(ajax.status == 200)
					{
						document.getElementById(div).innerHTML = ajax.responseText;
						var texto=unescape(ajax.responseText);
						extraiScript(texto);
					}
     		  	}
				else if(ajax.readyState == 0)
					setRequestPageLoader(div);
                else if(ajax.readyState == 3)
                    setRequestPageLoader(div);
				else
					setRequestPageLoader(div);
		}

		if(tipo == "POST"){
			ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
			ajax.setRequestHeader("Cache-Control", "no-store, no-cache, must-revalidate");
			ajax.setRequestHeader("Cache-Control", "post-check=0, pre-check=0");
			ajax.setRequestHeader("Pragma", "no-cache");
			ajax.send(campos);
		}
    	else {
   		ajax.send(null);
    	}
	}

}

var lastMainPageLoaded = null;

function loadPage(url, div, tipo, campos, hideLoading) {
    if (div === 'mainSite') {
        lastMainPageLoaded = url;
    }
    var replacement = {
        "home": "",
        "painelUsuario": "painel-usuario",
        "recuperardados": "recuperar-dados",
        "vip": "goldsways"
    };

    var handle = "?pagAjax=";

    if (url.indexOf(handle) < 0) {
        requestPage(url, div, tipo, campos, hideLoading);
        return;
    }

    var page = url.substr(url.indexOf(handle) + handle.length);

    if (page.indexOf('&') > -1) {
        page = page.substr(0, page.indexOf('&'));
    }

    if (Object.keys(replacement).length > 0) {
        for (var i in replacement) {
            if (replacement.hasOwnProperty(i) && page === i) {
                page = replacement[i];
            }
        }
    }

    if (window.history.pushState) {
        window.history.pushState('', '', '/' + page);
    }

    requestPage(url, div, tipo, campos, hideLoading);
}

function emptyInput(input) {
    if (input.value == input.defaultValue) {
        input.value = "";
    }
}

function writeDefault(input) {
    if (input.value == "") {
        input.value = input.defaultValue;
    }
}

function str_split(string, split_length)
{
    if (string === undefined || !string.toString || split_length < 1) {
        return false;
    }
    return string.toString().match(new RegExp('.{1,' + (split_length || '1') + '}', 'g'));
}
function carregarBanco(numero)
{
    switch(numero)
    {
        case '1':
            document.getElementById('trBB').style.display = '';
            document.getElementById('trCEF').style.display = 'none';
            document.getElementById('trITAU').style.display = 'none';
            document.getElementById('trBRAD').style.display = 'none';
            document.getElementById('trLOTCXQ').style.display = 'none';
            document.getElementById('trCCB').style.display = 'none';
            document.getElementById('trHSBC').style.display = 'none';
            document.getElementById('trSANTANDER').style.display = 'none';
            break;
        case '2':
            document.getElementById('trBB').style.display = 'none';
            document.getElementById('trCEF').style.display = '';
            document.getElementById('trITAU').style.display = 'none';
            document.getElementById('trBRAD').style.display = 'none';
            document.getElementById('trLOTCXQ').style.display = 'none';
            document.getElementById('trCCB').style.display = 'none';
            document.getElementById('trHSBC').style.display = 'none';
            document.getElementById('trSANTANDER').style.display = 'none';
            break;
        case '3':
            document.getElementById('trBB').style.display = 'none';
            document.getElementById('trCEF').style.display = 'none';
            document.getElementById('trITAU').style.display = '';
            document.getElementById('trBRAD').style.display = 'none';
            document.getElementById('trLOTCXQ').style.display = 'none';
            document.getElementById('trCCB').style.display = 'none';
            document.getElementById('trHSBC').style.display = 'none';
            document.getElementById('trSANTANDER').style.display = 'none';
            break;
        case '4':
            document.getElementById('trBB').style.display = 'none';
            document.getElementById('trCEF').style.display = 'none';
            document.getElementById('trITAU').style.display = 'none';
            document.getElementById('trBRAD').style.display = '';
            document.getElementById('trLOTCXQ').style.display = 'none';
            document.getElementById('trCCB').style.display = 'none';
            document.getElementById('trHSBC').style.display = 'none';
            document.getElementById('trSANTANDER').style.display = 'none';
            break;
        case '5':
            document.getElementById('trBB').style.display = 'none';
            document.getElementById('trCEF').style.display = 'none';
            document.getElementById('trITAU').style.display = 'none';
            document.getElementById('trBRAD').style.display = 'none';
            document.getElementById('trLOTCXQ').style.display = '';
            document.getElementById('trCCB').style.display = 'none';
            document.getElementById('trHSBC').style.display = 'none';
            document.getElementById('trSANTANDER').style.display = 'none';
            break;
        case '6':
            document.getElementById('trBB').style.display = 'none';
            document.getElementById('trCEF').style.display = 'none';
            document.getElementById('trITAU').style.display = 'none';
            document.getElementById('trBRAD').style.display = 'none';
            document.getElementById('trLOTCXQ').style.display = 'none';
            document.getElementById('trCCB').style.display = '';
            document.getElementById('trHSBC').style.display = 'none';
            document.getElementById('trSANTANDER').style.display = 'none';
            break;
        case '10':
            document.getElementById('trBB').style.display = 'none';
            document.getElementById('trCEF').style.display = 'none';
            document.getElementById('trITAU').style.display = 'none';
            document.getElementById('trBRAD').style.display = 'none';
            document.getElementById('trLOTCXQ').style.display = 'none';
            document.getElementById('trCCB').style.display = 'none';
            document.getElementById('trHSBC').style.display = '';
            document.getElementById('trSANTANDER').style.display = 'none';
            break;
        case '11':
            document.getElementById('trBB').style.display = 'none';
            document.getElementById('trCEF').style.display = 'none';
            document.getElementById('trITAU').style.display = 'none';
            document.getElementById('trBRAD').style.display = 'none';
            document.getElementById('trLOTCXQ').style.display = 'none';
            document.getElementById('trCCB').style.display = 'none';
            document.getElementById('trHSBC').style.display = 'none';
            document.getElementById('trSANTANDER').style.display = '';
            break;
    }
    carregarOpcoes('trBB', '102030');
    carregarOpcoes('trCEF', '102030');
    carregarOpcoes('trITAU', '102030');
    carregarOpcoes('trBRAD', '10203040506070');
    carregarOpcoes('trLOTCXQ', '1020');
    carregarOpcoes('trCCB', '1020');
    carregarOpcoes('trHSBC', '102030');
    carregarOpcoes('trSANTANDER', '1020304050');
    document.getElementById("tipoDepositoBB").options[0].selected = "true";
    document.getElementById("tipoDepositoCEF").options[0].selected = "true";
    document.getElementById("tipoDepositoITAU").options[0].selected = "true";
    document.getElementById("tipoDepositoBRAD").options[0].selected = "true";
    document.getElementById("tipoDepositoLOTCXQ").options[0].selected = "true";
    document.getElementById("tipoDepositoCCB").options[0].selected = "true";
    document.getElementById("tipoDepositoHSBC").options[0].selected = "true";
    document.getElementById("tipoDepositoSANTANDER").options[0].selected = "true";
}
function carregarOpcoes(trBanco, campos)
{
    var dumpCampos = new Array();
    dumpCampos = str_split(campos);
    for(i = 0; i < campos.length; i+=2) {
        document.getElementById(trBanco+''+dumpCampos[i]).style.display = (dumpCampos[i+1] == 0 ? 'none' : '')
    }
    document.getElementById('tipoDepositoF').value = campos;
}

function setInputNumbersOnly(element) {
    element.addEventListener('keypress', function (evt) {
        evt = evt || window.event;

        var key = evt.keyCode || evt.which;
        key = String.fromCharCode(key);

        if (!/[0-9]/.test(key)) {
            evt.returnValue = false;

            if(evt.preventDefault) {
                evt.preventDefault();
            }
        }
    });

    element.addEventListener('paste', function () {
        var self = this;

        setTimeout(function () {
            self.value = self.value.replace(/[^0-9]/g, '');
        });
    });
}